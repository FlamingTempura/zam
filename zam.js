!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.zam=t()}(this,function(){"use strict";var e=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,r,n,i){this.message=e,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(e,r){function n(){return e.substring(Fr,Tr)}function i(e,t){return{type:"literal",text:e,ignoreCase:t}}function o(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function u(){return{type:"any"}}function a(){return{type:"end"}}function s(e){return{type:"other",description:e}}function c(t){var r,n=Mr[t];if(n)return n;for(r=t-1;!Mr[r];)r--;for(n=Mr[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Mr[t]=n,n}function l(e,t){var r=c(e),n=c(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function f(e){Tr<Rr||(Tr>Rr&&(Rr=Tr,Ur=[]),Ur.push(e))}function d(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function p(){var t,r,n,i,o=32*Tr+0,u=Br[o];if(u)return Tr=u.nextPos,u.result;for(t=Tr,r=[],Q.test(e.charAt(Tr))?(n=e.charAt(Tr),Tr++):(n=J,0===qr&&f(W));n!==J;)r.push(n),Q.test(e.charAt(Tr))?(n=e.charAt(Tr),Tr++):(n=J,0===qr&&f(W));if(r!==J?(n=h(),n!==J?(i=p(),i!==J?(Fr=t,r=X(r,n,i),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t===J){for(t=Tr,r=[],e.length>Tr?(n=e.charAt(Tr),Tr++):(n=J,0===qr&&f(Y));n!==J;)r.push(n),e.length>Tr?(n=e.charAt(Tr),Tr++):(n=J,0===qr&&f(Y));r!==J&&(Fr=t,r=Z(r)),t=r}return Br[o]={nextPos:Tr,result:t},t}function h(){var t,r,n,i,o,u,a=32*Tr+1,s=Br[a];return s?(Tr=s.nextPos,s.result):(t=Tr,"{{{"===e.substr(Tr,3)?(r=ee,Tr+=3):(r=J,0===qr&&f(te)),r!==J?(n=I(),n!==J?(i=v(),i!==J?(o=I(),o!==J?("}}}"===e.substr(Tr,3)?(u=re,Tr+=3):(u=J,0===qr&&f(ne)),u!==J?(Fr=t,r=ie(i),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t===J&&(t=Tr,"{{"===e.substr(Tr,2)?(r=oe,Tr+=2):(r=J,0===qr&&f(ue)),r!==J?(n=I(),n!==J?(i=v(),i!==J?(o=I(),o!==J?("}}"===e.substr(Tr,2)?(u=ae,Tr+=2):(u=J,0===qr&&f(se)),u!==J?(Fr=t,r=ce(i),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)),Br[a]={nextPos:Tr,result:t},t)}function v(){var t,r,n,i,o,u,a=32*Tr+2,s=Br[a];return s?(Tr=s.nextPos,s.result):(t=Tr,r=m(),r!==J?(n=I(),n!==J?(61===e.charCodeAt(Tr)?(i=le,Tr++):(i=J,0===qr&&f(fe)),i===J&&("*="===e.substr(Tr,2)?(i=de,Tr+=2):(i=J,0===qr&&f(pe)),i===J&&("/="===e.substr(Tr,2)?(i=he,Tr+=2):(i=J,0===qr&&f(ve)),i===J&&("%="===e.substr(Tr,2)?(i=me,Tr+=2):(i=J,0===qr&&f(be)),i===J&&("+="===e.substr(Tr,2)?(i=xe,Tr+=2):(i=J,0===qr&&f(ye)),i===J&&("-="===e.substr(Tr,2)?(i=ge,Tr+=2):(i=J,0===qr&&f(Ae))))))),i!==J?(o=I(),o!==J?(u=v(),u!==J?(Fr=t,r=Pe(r,i,u),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t===J&&(t=b()),Br[a]={nextPos:Tr,result:t},t)}function m(){var e,t=32*Tr+3,r=Br[t];return r?(Tr=r.nextPos,r.result):(e=E(),e===J&&(e=$()),Br[t]={nextPos:Tr,result:e},e)}function b(){var t,r,n,i,o,u,a,s,c,l,d=32*Tr+4,p=Br[d];return p?(Tr=p.nextPos,p.result):(t=Tr,r=x(),r!==J?(n=I(),n!==J?(63===e.charCodeAt(Tr)?(i=Ce,Tr++):(i=J,0===qr&&f(we)),i!==J?(o=I(),o!==J?(u=b(),u!==J?(a=I(),a!==J?(58===e.charCodeAt(Tr)?(s=ke,Tr++):(s=J,0===qr&&f(Ee)),s!==J?(c=I(),c!==J?(l=b(),l!==J?(Fr=t,r=$e(r,u,l),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t===J&&(t=x()),Br[d]={nextPos:Tr,result:t},t)}function x(){var t,r,n,i,o,u,a,s,c=32*Tr+5,l=Br[c];if(l)return Tr=l.nextPos,l.result;if(t=Tr,r=y(),r!==J){for(n=[],i=Tr,o=I(),o!==J?("||"===e.substr(Tr,2)?(u=je,Tr+=2):(u=J,0===qr&&f(Ve)),u!==J?(a=I(),a!==J?(s=y(),s!==J?(Fr=i,o=Le(r,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);i!==J;)n.push(i),i=Tr,o=I(),o!==J?("||"===e.substr(Tr,2)?(u=je,Tr+=2):(u=J,0===qr&&f(Ve)),u!==J?(a=I(),a!==J?(s=y(),s!==J?(Fr=i,o=Le(r,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);n!==J?(Fr=t,r=Ne(r,n),t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[c]={nextPos:Tr,result:t},t}function y(){var t,r,n,i,o,u,a,s,c=32*Tr+6,l=Br[c];if(l)return Tr=l.nextPos,l.result;if(t=Tr,r=g(),r!==J){for(n=[],i=Tr,o=I(),o!==J?("&&"===e.substr(Tr,2)?(u=ze,Tr+=2):(u=J,0===qr&&f(Oe)),u!==J?(a=I(),a!==J?(s=g(),s!==J?(Fr=i,o=Se(r,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);i!==J;)n.push(i),i=Tr,o=I(),o!==J?("&&"===e.substr(Tr,2)?(u=ze,Tr+=2):(u=J,0===qr&&f(Oe)),u!==J?(a=I(),a!==J?(s=g(),s!==J?(Fr=i,o=Se(r,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);n!==J?(Fr=t,r=Ne(r,n),t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[c]={nextPos:Tr,result:t},t}function g(){var t,r,n,i,o,u,a,s,c=32*Tr+7,l=Br[c];if(l)return Tr=l.nextPos,l.result;if(t=Tr,r=A(),r!==J){for(n=[],i=Tr,o=I(),o!==J?("==="===e.substr(Tr,3)?(u=Te,Tr+=3):(u=J,0===qr&&f(Fe)),u===J&&("!=="===e.substr(Tr,3)?(u=Me,Tr+=3):(u=J,0===qr&&f(Re)),u===J&&("=="===e.substr(Tr,2)?(u=Ue,Tr+=2):(u=J,0===qr&&f(qe)),u===J&&("!="===e.substr(Tr,2)?(u=Be,Tr+=2):(u=J,0===qr&&f(De))))),u!==J?(a=I(),a!==J?(s=A(),s!==J?(Fr=i,o=Ie(r,u,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);i!==J;)n.push(i),i=Tr,o=I(),o!==J?("==="===e.substr(Tr,3)?(u=Te,Tr+=3):(u=J,0===qr&&f(Fe)),u===J&&("!=="===e.substr(Tr,3)?(u=Me,Tr+=3):(u=J,0===qr&&f(Re)),u===J&&("=="===e.substr(Tr,2)?(u=Ue,Tr+=2):(u=J,0===qr&&f(qe)),u===J&&("!="===e.substr(Tr,2)?(u=Be,Tr+=2):(u=J,0===qr&&f(De))))),u!==J?(a=I(),a!==J?(s=A(),s!==J?(Fr=i,o=Ie(r,u,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);n!==J?(Fr=t,r=_e(r,n),t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[c]={nextPos:Tr,result:t},t}function A(){var t,r,n,i,o,u,a,s,c=32*Tr+8,l=Br[c];if(l)return Tr=l.nextPos,l.result;if(t=Tr,r=P(),r!==J){for(n=[],i=Tr,o=I(),o!==J?("<="===e.substr(Tr,2)?(u=He,Tr+=2):(u=J,0===qr&&f(Je)),u===J&&(">="===e.substr(Tr,2)?(u=Ge,Tr+=2):(u=J,0===qr&&f(Ke)),u===J&&(60===e.charCodeAt(Tr)?(u=Qe,Tr++):(u=J,0===qr&&f(We)),u===J&&(62===e.charCodeAt(Tr)?(u=Xe,Tr++):(u=J,0===qr&&f(Ye))))),u!==J?(a=I(),a!==J?(s=P(),s!==J?(Fr=i,o=Ie(r,u,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);i!==J;)n.push(i),i=Tr,o=I(),o!==J?("<="===e.substr(Tr,2)?(u=He,Tr+=2):(u=J,0===qr&&f(Je)),u===J&&(">="===e.substr(Tr,2)?(u=Ge,Tr+=2):(u=J,0===qr&&f(Ke)),u===J&&(60===e.charCodeAt(Tr)?(u=Qe,Tr++):(u=J,0===qr&&f(We)),u===J&&(62===e.charCodeAt(Tr)?(u=Xe,Tr++):(u=J,0===qr&&f(Ye))))),u!==J?(a=I(),a!==J?(s=P(),s!==J?(Fr=i,o=Ie(r,u,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);n!==J?(Fr=t,r=_e(r,n),t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[c]={nextPos:Tr,result:t},t}function P(){var t,r,n,i,o,u,a,s,c=32*Tr+9,l=Br[c];if(l)return Tr=l.nextPos,l.result;if(t=Tr,r=C(),r!==J){for(n=[],i=Tr,o=I(),o!==J?(Ze.test(e.charAt(Tr))?(u=e.charAt(Tr),Tr++):(u=J,0===qr&&f(et)),u!==J?(a=I(),a!==J?(s=C(),s!==J?(Fr=i,o=Ie(r,u,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);i!==J;)n.push(i),i=Tr,o=I(),o!==J?(Ze.test(e.charAt(Tr))?(u=e.charAt(Tr),Tr++):(u=J,0===qr&&f(et)),u!==J?(a=I(),a!==J?(s=C(),s!==J?(Fr=i,o=Ie(r,u,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);n!==J?(Fr=t,r=_e(r,n),t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[c]={nextPos:Tr,result:t},t}function C(){var t,r,n,i,o,u,a,s,c=32*Tr+10,l=Br[c];if(l)return Tr=l.nextPos,l.result;if(t=Tr,r=w(),r!==J){for(n=[],i=Tr,o=I(),o!==J?(tt.test(e.charAt(Tr))?(u=e.charAt(Tr),Tr++):(u=J,0===qr&&f(rt)),u!==J?(a=I(),a!==J?(s=w(),s!==J?(Fr=i,o=Ie(r,u,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);i!==J;)n.push(i),i=Tr,o=I(),o!==J?(tt.test(e.charAt(Tr))?(u=e.charAt(Tr),Tr++):(u=J,0===qr&&f(rt)),u!==J?(a=I(),a!==J?(s=w(),s!==J?(Fr=i,o=Ie(r,u,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);n!==J?(Fr=t,r=_e(r,n),t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[c]={nextPos:Tr,result:t},t}function w(){var t,r,n,i,o=32*Tr+11,u=Br[o];return u?(Tr=u.nextPos,u.result):(t=k(),t===J&&(t=Tr,"++"===e.substr(Tr,2)?(r=nt,Tr+=2):(r=J,0===qr&&f(it)),r===J&&("--"===e.substr(Tr,2)?(r=ot,Tr+=2):(r=J,0===qr&&f(ut)),r===J&&(at.test(e.charAt(Tr))?(r=e.charAt(Tr),Tr++):(r=J,0===qr&&f(st)))),r!==J?(n=I(),n!==J?(i=w(),i!==J?(Fr=t,r=ct(r,i),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)),Br[o]={nextPos:Tr,result:t},t)}function k(){var t,r,n,i,o=32*Tr+12,u=Br[o];return u?(Tr=u.nextPos,u.result):(t=Tr,r=m(),r!==J?(n=I(),n!==J?("++"===e.substr(Tr,2)?(i=nt,Tr+=2):(i=J,0===qr&&f(it)),i===J&&("--"===e.substr(Tr,2)?(i=ot,Tr+=2):(i=J,0===qr&&f(ut))),i!==J?(Fr=t,r=lt(r,i),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t===J&&(t=m()),Br[o]={nextPos:Tr,result:t},t)}function E(){var e,t,r,n,i,o=32*Tr+13,u=Br[o];return u?(Tr=u.nextPos,u.result):(e=Tr,t=Tr,r=$(),r!==J?(n=I(),n!==J?(i=L(),i!==J?(Fr=t,r=ft(r,i),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t!==J?(r=j(),r!==J?(Fr=e,t=dt(t,r),e=t):(Tr=e,e=J)):(Tr=e,e=J),Br[o]={nextPos:Tr,result:e},e)}function $(){var t,r,n,i,o,u,a,s=32*Tr+14,c=Br[s];return c?(Tr=c.nextPos,c.result):(t=Tr,r=V(),r===J&&(r=N(),r===J&&(r=M(),r===J&&(r=z(),r===J&&(r=S(),r===J&&(r=Tr,40===e.charCodeAt(Tr)?(n=pt,Tr++):(n=J,0===qr&&f(ht)),n!==J?(i=I(),i!==J?(o=v(),o!==J?(u=I(),u!==J?(41===e.charCodeAt(Tr)?(a=vt,Tr++):(a=J,0===qr&&f(mt)),a!==J?(Fr=r,n=bt(o),r=n):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)))))),r!==J?(n=j(),n!==J?(Fr=t,r=xt(r,n),t=r):(Tr=t,t=J)):(Tr=t,t=J),Br[s]={nextPos:Tr,result:t},t)}function j(){var t,r,n,i,o,u,a,s,c=32*Tr+15,l=Br[c];if(l)return Tr=l.nextPos,l.result;for(t=[],r=Tr,n=I(),n!==J?(91===e.charCodeAt(Tr)?(i=yt,Tr++):(i=J,0===qr&&f(gt)),i!==J?(o=I(),o!==J?(u=v(),u!==J?(a=I(),a!==J?(93===e.charCodeAt(Tr)?(s=At,Tr++):(s=J,0===qr&&f(Pt)),s!==J?(Fr=r,n=Ct(u),r=n):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J),r===J&&(r=Tr,n=I(),n!==J?(46===e.charCodeAt(Tr)?(i=wt,Tr++):(i=J,0===qr&&f(kt)),i!==J?(o=I(),o!==J?(u=N(),u!==J?(Fr=r,n=Et(u),r=n):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J));r!==J;)t.push(r),r=Tr,n=I(),n!==J?(91===e.charCodeAt(Tr)?(i=yt,Tr++):(i=J,0===qr&&f(gt)),i!==J?(o=I(),o!==J?(u=v(),u!==J?(a=I(),a!==J?(93===e.charCodeAt(Tr)?(s=At,Tr++):(s=J,0===qr&&f(Pt)),s!==J?(Fr=r,n=Ct(u),r=n):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J),r===J&&(r=Tr,n=I(),n!==J?(46===e.charCodeAt(Tr)?(i=wt,Tr++):(i=J,0===qr&&f(kt)),i!==J?(o=I(),o!==J?(u=N(),u!==J?(Fr=r,n=Et(u),r=n):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J)):(Tr=r,r=J));return Br[c]={nextPos:Tr,result:t},t}function V(){var t,r,n,i,o,u,a,s=32*Tr+16,c=Br[s];return c?(Tr=c.nextPos,c.result):(t=Tr,"new"===e.substr(Tr,3)?(r=$t,Tr+=3):(r=J,0===qr&&f(jt)),r!==J?(n=_(),n!==J?(i=$(),i!==J?(o=Tr,u=I(),u!==J?(a=L(),a!==J?(Fr=o,u=Vt(i,a),o=u):(Tr=o,o=J)):(Tr=o,o=J),o===J&&(o=null),o!==J?(Fr=t,r=Lt(i,o),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),Br[s]={nextPos:Tr,result:t},t)}function L(){var t,r,n,i,o,u,a,s,c,l,d=32*Tr+17,p=Br[d];if(p)return Tr=p.nextPos,p.result;if(t=Tr,40===e.charCodeAt(Tr)?(r=pt,Tr++):(r=J,0===qr&&f(ht)),r!==J?(n=I(),n!==J?(41===e.charCodeAt(Tr)?(i=vt,Tr++):(i=J,0===qr&&f(mt)),i!==J?(Fr=t,r=Nt(),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t===J)if(t=Tr,40===e.charCodeAt(Tr)?(r=pt,Tr++):(r=J,0===qr&&f(ht)),r!==J)if(n=I(),n!==J)if(i=v(),i!==J){for(o=[],u=Tr,a=I(),a!==J?(44===e.charCodeAt(Tr)?(s=zt,Tr++):(s=J,0===qr&&f(Ot)),s!==J?(c=I(),c!==J?(l=v(),l!==J?(Fr=u,a=St(i,l),u=a):(Tr=u,u=J)):(Tr=u,u=J)):(Tr=u,u=J)):(Tr=u,u=J);u!==J;)o.push(u),u=Tr,a=I(),a!==J?(44===e.charCodeAt(Tr)?(s=zt,Tr++):(s=J,0===qr&&f(Ot)),s!==J?(c=I(),c!==J?(l=v(),l!==J?(Fr=u,a=St(i,l),u=a):(Tr=u,u=J)):(Tr=u,u=J)):(Tr=u,u=J)):(Tr=u,u=J);o!==J?(u=I(),u!==J?(41===e.charCodeAt(Tr)?(a=vt,Tr++):(a=J,0===qr&&f(mt)),a!==J?(Fr=t,r=Tt(i,o),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)}else Tr=t,t=J;else Tr=t,t=J;else Tr=t,t=J;return Br[d]={nextPos:Tr,result:t},t}function N(){var t,r,n,i,o,u=32*Tr+18,a=Br[u];if(a)return Tr=a.nextPos,a.result;if(qr++,t=Tr,r=Tr,qr++,n=R(),qr--,n===J?r=void 0:(Tr=r,r=J),r!==J)if(Mt.test(e.charAt(Tr))?(n=e.charAt(Tr),Tr++):(n=J,0===qr&&f(Rt)),n!==J){for(i=[],Ut.test(e.charAt(Tr))?(o=e.charAt(Tr),Tr++):(o=J,0===qr&&f(qt));o!==J;)i.push(o),Ut.test(e.charAt(Tr))?(o=e.charAt(Tr),Tr++):(o=J,0===qr&&f(qt));i!==J?(Fr=t,r=Bt(n,i),t=r):(Tr=t,t=J)}else Tr=t,t=J;else Tr=t,t=J;return qr--,t===J&&(r=J,0===qr&&f(Ft)),Br[u]={nextPos:Tr,result:t},t}function z(){var t,r,n,i,o,u,a=32*Tr+19,s=Br[a];return s?(Tr=s.nextPos,s.result):(t=Tr,91===e.charCodeAt(Tr)?(r=yt,Tr++):(r=J,0===qr&&f(gt)),r!==J?(n=I(),n!==J?(93===e.charCodeAt(Tr)?(i=At,Tr++):(i=J,0===qr&&f(Pt)),i!==J?(Fr=t,r=Dt(),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t===J&&(t=Tr,91===e.charCodeAt(Tr)?(r=yt,Tr++):(r=J,0===qr&&f(gt)),r!==J?(n=I(),n!==J?(i=O(),i!==J?(o=I(),o!==J?(93===e.charCodeAt(Tr)?(u=At,Tr++):(u=J,0===qr&&f(Pt)),u!==J?(Fr=t,r=It(i),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)),Br[a]={nextPos:Tr,result:t},t)}function O(){var t,r,n,i,o,u,a,s,c=32*Tr+20,l=Br[c];if(l)return Tr=l.nextPos,l.result;if(t=Tr,r=v(),r!==J){for(n=[],i=Tr,o=I(),o!==J?(44===e.charCodeAt(Tr)?(u=zt,Tr++):(u=J,0===qr&&f(Ot)),u!==J?(a=I(),a!==J?(s=v(),s!==J?(Fr=i,o=_t(r,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);i!==J;)n.push(i),i=Tr,o=I(),o!==J?(44===e.charCodeAt(Tr)?(u=zt,Tr++):(u=J,0===qr&&f(Ot)),u!==J?(a=I(),a!==J?(s=v(),s!==J?(Fr=i,o=_t(r,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);n!==J?(Fr=t,r=Tt(r,n),t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[c]={nextPos:Tr,result:t},t}function S(){var t,r,n,i,o,u,a,s,c=32*Tr+21,l=Br[c];return l?(Tr=l.nextPos,l.result):(t=Tr,123===e.charCodeAt(Tr)?(r=Ht,Tr++):(r=J,0===qr&&f(Jt)),r!==J?(n=I(),n!==J?(125===e.charCodeAt(Tr)?(i=Gt,Tr++):(i=J,0===qr&&f(Kt)),i!==J?(Fr=t,r=Qt(),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),t===J&&(t=Tr,123===e.charCodeAt(Tr)?(r=Ht,Tr++):(r=J,0===qr&&f(Jt)),r!==J?(n=I(),n!==J?(i=T(),i!==J?(o=I(),o!==J?(u=Tr,44===e.charCodeAt(Tr)?(a=zt,Tr++):(a=J,0===qr&&f(Ot)),a!==J?(s=I(),s!==J?(a=[a,s],u=a):(Tr=u,u=J)):(Tr=u,u=J),u===J&&(u=null),u!==J?(125===e.charCodeAt(Tr)?(a=Gt,Tr++):(a=J,0===qr&&f(Kt)),a!==J?(Fr=t,r=Wt(i),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)),Br[c]={nextPos:Tr,result:t},t)}function T(){var t,r,n,i,o,u,a,s,c=32*Tr+22,l=Br[c];if(l)return Tr=l.nextPos,l.result;if(t=Tr,r=F(),r!==J){for(n=[],i=Tr,o=I(),o!==J?(44===e.charCodeAt(Tr)?(u=zt,Tr++):(u=J,0===qr&&f(Ot)),u!==J?(a=I(),a!==J?(s=F(),s!==J?(Fr=i,o=Xt(r,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);i!==J;)n.push(i),i=Tr,o=I(),o!==J?(44===e.charCodeAt(Tr)?(u=zt,Tr++):(u=J,0===qr&&f(Ot)),u!==J?(a=I(),a!==J?(s=F(),s!==J?(Fr=i,o=Xt(r,s),i=o):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J)):(Tr=i,i=J);n!==J?(Fr=t,r=Tt(r,n),t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[c]={nextPos:Tr,result:t},t}function F(){var t,r,n,i,o,u,a=32*Tr+23,s=Br[a];return s?(Tr=s.nextPos,s.result):(t=Tr,r=N(),r===J&&(r=D(),r===J&&(r=U())),r!==J?(n=I(),n!==J?(58===e.charCodeAt(Tr)?(i=ke,Tr++):(i=J,0===qr&&f(Ee)),i!==J?(o=I(),o!==J?(u=v(),u!==J?(Fr=t,r=Yt(r,u),t=r):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J)):(Tr=t,t=J),Br[a]={nextPos:Tr,result:t},t)}function M(){var e,t=32*Tr+24,r=Br[t];return r?(Tr=r.nextPos,r.result):(e=R(),e===J&&(e=U(),e===J&&(e=D())),Br[t]={nextPos:Tr,result:e},e)}function R(){var t,r,n=32*Tr+25,i=Br[n];return i?(Tr=i.nextPos,i.result):(t=Tr,"null"===e.substr(Tr,4)?(r=Zt,Tr+=4):(r=J,0===qr&&f(er)),r!==J&&(Fr=t,r=tr()),t=r,t===J&&(t=Tr,"true"===e.substr(Tr,4)?(r=rr,Tr+=4):(r=J,0===qr&&f(nr)),r!==J&&(Fr=t,r=ir()),t=r,t===J&&(t=Tr,"false"===e.substr(Tr,5)?(r=or,Tr+=5):(r=J,0===qr&&f(ur)),r!==J&&(Fr=t,r=ar()),t=r)),Br[n]={nextPos:Tr,result:t},t)}function U(){var t,r,n,i,o,u=32*Tr+26,a=Br[u];if(a)return Tr=a.nextPos,a.result;if(qr++,t=Tr,r=q(),r!==J)if(46===e.charCodeAt(Tr)?(n=wt,Tr++):(n=J,0===qr&&f(kt)),n!==J){for(i=[],cr.test(e.charAt(Tr))?(o=e.charAt(Tr),Tr++):(o=J,0===qr&&f(lr));o!==J;)i.push(o),cr.test(e.charAt(Tr))?(o=e.charAt(Tr),Tr++):(o=J,0===qr&&f(lr));i!==J?(o=B(),o===J&&(o=null),o!==J?(Fr=t,r=fr(),t=r):(Tr=t,t=J)):(Tr=t,t=J)}else Tr=t,t=J;else Tr=t,t=J;if(t===J){if(t=Tr,46===e.charCodeAt(Tr)?(r=wt,Tr++):(r=J,0===qr&&f(kt)),r!==J){if(n=[],cr.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=J,0===qr&&f(lr)),i!==J)for(;i!==J;)n.push(i),cr.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=J,0===qr&&f(lr));else n=J;n!==J?(i=B(),i===J&&(i=null),i!==J?(Fr=t,r=fr(),t=r):(Tr=t,t=J)):(Tr=t,t=J)}else Tr=t,t=J;t===J&&(t=Tr,r=q(),r!==J?(n=B(),n===J&&(n=null),n!==J?(Fr=t,r=fr(),t=r):(Tr=t,t=J)):(Tr=t,t=J))}return qr--,t===J&&(r=J,0===qr&&f(sr)),Br[u]={nextPos:Tr,result:t},t}function q(){var t,r,n,i,o=32*Tr+27,u=Br[o];if(u)return Tr=u.nextPos,u.result;if(48===e.charCodeAt(Tr)?(t=dr,Tr++):(t=J,0===qr&&f(pr)),t===J)if(t=Tr,hr.test(e.charAt(Tr))?(r=e.charAt(Tr),Tr++):(r=J,0===qr&&f(vr)),r!==J){for(n=[],cr.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=J,0===qr&&f(lr));i!==J;)n.push(i),cr.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=J,0===qr&&f(lr));n!==J?(r=[r,n],t=r):(Tr=t,t=J)}else Tr=t,t=J;return Br[o]={nextPos:Tr,result:t},t}function B(){var t,r,n,i,o,u=32*Tr+28,a=Br[u];if(a)return Tr=a.nextPos,a.result;if(t=Tr,"e"===e.substr(Tr,1).toLowerCase()?(r=e.charAt(Tr),Tr++):(r=J,0===qr&&f(mr)),r!==J)if(Ze.test(e.charAt(Tr))?(n=e.charAt(Tr),Tr++):(n=J,0===qr&&f(et)),n===J&&(n=null),n!==J){if(i=[],cr.test(e.charAt(Tr))?(o=e.charAt(Tr),Tr++):(o=J,0===qr&&f(lr)),o!==J)for(;o!==J;)i.push(o),cr.test(e.charAt(Tr))?(o=e.charAt(Tr),Tr++):(o=J,0===qr&&f(lr));else i=J;i!==J?(r=[r,n,i],t=r):(Tr=t,t=J)}else Tr=t,t=J;else Tr=t,t=J;return Br[u]={nextPos:Tr,result:t},t}function D(){var t,r,n,i,o,u=32*Tr+29,a=Br[u];if(a)return Tr=a.nextPos,a.result;if(qr++,t=Tr,34===e.charCodeAt(Tr)?(r=xr,Tr++):(r=J,0===qr&&f(yr)),r!==J){for(n=[],i=Tr,'\\"'===e.substr(Tr,2)?(o=gr,Tr+=2):(o=J,0===qr&&f(Ar)),o!==J&&(Fr=i,o=Pr()),i=o,i===J&&(Cr.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=J,0===qr&&f(wr)));i!==J;)n.push(i),i=Tr,'\\"'===e.substr(Tr,2)?(o=gr,Tr+=2):(o=J,0===qr&&f(Ar)),o!==J&&(Fr=i,o=Pr()),i=o,i===J&&(Cr.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=J,0===qr&&f(wr)));n!==J?(34===e.charCodeAt(Tr)?(i=xr,Tr++):(i=J,0===qr&&f(yr)),i!==J?(Fr=t,r=kr(n),t=r):(Tr=t,t=J)):(Tr=t,t=J)}else Tr=t,t=J;if(t===J)if(t=Tr,39===e.charCodeAt(Tr)?(r=Er,Tr++):(r=J,0===qr&&f($r)),r!==J){for(n=[],i=Tr,"\\'"===e.substr(Tr,2)?(o=jr,Tr+=2):(o=J,0===qr&&f(Vr)),o!==J&&(Fr=i,o=Lr()),i=o,i===J&&(Nr.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=J,0===qr&&f(zr)));i!==J;)n.push(i),i=Tr,"\\'"===e.substr(Tr,2)?(o=jr,Tr+=2):(o=J,0===qr&&f(Vr)),o!==J&&(Fr=i,o=Lr()),i=o,i===J&&(Nr.test(e.charAt(Tr))?(i=e.charAt(Tr),Tr++):(i=J,0===qr&&f(zr)));n!==J?(39===e.charCodeAt(Tr)?(i=Er,Tr++):(i=J,0===qr&&f($r)),i!==J?(Fr=t,r=kr(n),t=r):(Tr=t,t=J)):(Tr=t,t=J)}else Tr=t,t=J;return qr--,t===J&&(r=J,0===qr&&f(br)),Br[u]={nextPos:Tr,result:t},t}function I(){var e,t=32*Tr+30,r=Br[t];return r?(Tr=r.nextPos,r.result):(e=_(),e===J&&(e=null),Br[t]={nextPos:Tr,result:e},e)}function _(){var t,r,n=32*Tr+31,i=Br[n];if(i)return Tr=i.nextPos,i.result;if(t=[],Or.test(e.charAt(Tr))?(r=e.charAt(Tr),Tr++):(r=J,0===qr&&f(Sr)),r!==J)for(;r!==J;)t.push(r),Or.test(e.charAt(Tr))?(r=e.charAt(Tr),Tr++):(r=J,0===qr&&f(Sr));else t=J;return Br[n]={nextPos:Tr,result:t},t}r=void 0!==r?r:{};var H,J={},G={Text:p,Expression:v},K=p,Q=/^[^{]/,W=o(["{"],!0,!1),X=function(e,t,r){return(e.length>0?[e.join("")]:[]).concat([t],r)},Y=u(),Z=function(e){return e.length>0?[e.join("")]:[]},ee="{{{",te=i("{{{",!1),re="}}}",ne=i("}}}",!1),ie=function(e){return{html:!0,expression:e}},oe="{{",ue=i("{{",!1),ae="}}",se=i("}}",!1),ce=function(e){return{html:!1,expression:e}},le="=",fe=i("=",!1),de="*=",pe=i("*=",!1),he="/=",ve=i("/=",!1),me="%=",be=i("%=",!1),xe="+=",ye=i("+=",!1),ge="-=",Ae=i("-=",!1),Pe=function(e,t,r){return{type:"Assignment",operator:t,left:e,right:r}},Ce="?",we=i("?",!1),ke=":",Ee=i(":",!1),$e=function(e,t,r){return{type:"Conditional",test:e,consequent:t,alternate:r}},je="||",Ve=i("||",!1),Le=function(e,t){return{operator:"||",arg:t}},Ne=function(e,t){return Dr("Logical",e,t)},ze="&&",Oe=i("&&",!1),Se=function(e,t){return{operator:"&&",arg:t}},Te="===",Fe=i("===",!1),Me="!==",Re=i("!==",!1),Ue="==",qe=i("==",!1),Be="!=",De=i("!=",!1),Ie=function(e,t,r){return{operator:t,arg:r}},_e=function(e,t){return Dr("Binary",e,t)},He="<=",Je=i("<=",!1),Ge=">=",Ke=i(">=",!1),Qe="<",We=i("<",!1),Xe=">",Ye=i(">",!1),Ze=/^[+\-]/,et=o(["+","-"],!1,!1),tt=/^[*\/%]/,rt=o(["*","/","%"],!1,!1),nt="++",it=i("++",!1),ot="--",ut=i("--",!1),at=/^[+!\-]/,st=o(["+","!","-"],!1,!1),ct=function(e,t){return{type:"++"===e||"--"===e?"Update":"Unary",operator:e,argument:t,prefix:!0}},lt=function(e,t){return{type:"Update",operator:t,argument:e,prefix:!1}},ft=function(e,t){return{type:"Call",callee:e,arguments:t}},dt=function(e,t){return t.reduce(function(e,t){return{type:"Member",property:t,object:e}},e)},pt="(",ht=i("(",!1),vt=")",mt=i(")",!1),bt=function(e){return e},xt=function(e,t){return t.reduce(function(e,t){return{type:"Member",object:e,property:t}},e)},yt="[",gt=i("[",!1),At="]",Pt=i("]",!1),Ct=function(e){return e},wt=".",kt=i(".",!1),Et=function(e){return{type:"Literal",value:e.name}},$t="new",jt=i("new",!1),Vt=function(e,t){return t},Lt=function(e,t){return{type:"NewExpression",callee:e,arguments:t||[]}},Nt=function(){return[]},zt=",",Ot=i(",",!1),St=function(e,t){return t},Tt=function(e,t){return[e].concat(t)},Ft=s("identifier"),Mt=/^[a-z$_]/i,Rt=o([["a","z"],"$","_"],!1,!0),Ut=/^[a-z$_0-9]/i,qt=o([["a","z"],"$","_",["0","9"]],!1,!0),Bt=function(e,t){return{type:"Identifier",name:e+t.join("")}},Dt=function(){return{type:"Array",elements:[]}},It=function(e){return{type:"Array",elements:e}},_t=function(e,t){return t},Ht="{",Jt=i("{",!1),Gt="}",Kt=i("}",!1),Qt=function(){return{type:"Object",properties:[]}},Wt=function(e){return{type:"Object",properties:e}},Xt=function(e,t){return t},Yt=function(e,t){return{type:"Property",key:e.name||e.value,value:t}},Zt="null",er=i("null",!1),tr=function(){return{type:"Literal",value:null}},rr="true",nr=i("true",!1),ir=function(){return{type:"Literal",value:!0}},or="false",ur=i("false",!1),ar=function(){return{type:"Literal",value:!1}},sr=s("number"),cr=/^[0-9]/,lr=o([["0","9"]],!1,!1),fr=function(){return{type:"Literal",value:parseFloat(n())}},dr="0",pr=i("0",!1),hr=/^[1-9]/,vr=o([["1","9"]],!1,!1),mr=i("e",!0),br=s("string"),xr='"',yr=i('"',!1),gr='\\"',Ar=i('\\"',!1),Pr=function(){return'"'},Cr=/^[^"]/,wr=o(['"'],!0,!1),kr=function(e){return{type:"Literal",value:e.join("")}},Er="'",$r=i("'",!1),jr="\\'",Vr=i("\\'",!1),Lr=function(){return"'"},Nr=/^[^'']/,zr=o(["'","'"],!0,!1),Or=/^[\t ]/,Sr=o(["\t"," "],!1,!1),Tr=0,Fr=0,Mr=[{line:1,column:1}],Rr=0,Ur=[],qr=0,Br={};if("startRule"in r){if(!(r.startRule in G))throw new Error("Can't start parsing from rule \""+r.startRule+'".');K=G[r.startRule]}var Dr=function(e,t,r){return 0===r.length?t:r.reduce(function(t,r){return{type:e,operator:r.operator,left:t,right:r.arg}},t)};if(H=K(),H!==J&&Tr===e.length)return H;throw H!==J&&Tr<e.length&&f(a()),d(Ur,Rr<e.length?e.charAt(Rr):null,Rr<e.length?l(Rr,Rr+1):l(Rr,Rr))}return e(t,Error),t.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return s[e.type](e)}function u(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function a(e){return e?'"'+n(e)+'"':"end of input"}var s={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+u(e)+" but "+a(t)+" found."},{SyntaxError:t,parse:r}}(),t=function(e){return String(null!==e&&"undefined"!=typeof e?e:"")},r=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},n=function(e){return e.split("").reduce(function(e,t){return(e<<5)-e+t.charCodeAt(0)|0},0).toString(16)},i="undefined"!=typeof process?process.nextTick:function(e){var t=String(Math.random()),r=function r(n){n.data===t&&(n.stopPropagation(),e(),window.removeEventListener("message",r,!0))};window.addEventListener("message",r,!0),window.postMessage(t,"*")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},a=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},s=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Expression";return e.parse(t,{startRule:r})},c=["accept","accept-charset","accesskey","action","align","alt","async","autocomplete","autofocus","autoplay","autosave","buffered","challenge","charset","checked","cite","class","code","codebase","cols","colspan","content","contenteditable","contextmenu","controls","coords","crossorigin","data","data-*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","headers","hidden","high","href","hreflang","http-equiv","icon","id","integrity","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","manifest","max","maxlength","minlength","media","method","min","multiple","muted","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","seamless","selected","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","summary","tabindex","target","title","type","usemap","value","wrap"],l=["selected","checked","disabled","readonly","multiple","ismap","defer","noresize"],f=["align-.*","all","animation","animation-.*","backface-visibility","background","background-.*","border","border-.*","bottom","box-.*","break-.*","caption-side","caret-color","clear","clip","clip-path","color","column-.*","columns","content","counter-.*","cursor","direction","display","empty-cells","filter","flex-.*","float","font","font-.*","grid","grid-.*","height","hyphens","image-.*","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-.*","list-.*","margin","margin-.*","mask","mask-.*","max-height","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","object-fit","object-position","offset-.*","opacity","order","orphans","outline","outline-.*","overflow","overflow-.*","padding","padding-.*","page-break-.*","perspective","perspective-origin","pointer-events","position","quotes","resize","right","scroll-.*","shape-.*","tab-size","table-layout","text-.*","top","touch-action","transform","transform-.*","transition","transition-.*","unicode-bidi","unset","vertical-align","visibility","white-space","widows","width","will-change","word-.*","writing-mode","z-index"],d=["load","error","focus","blur","click","dblclick","mouse.*","keyup","keydown","keypress","input","change","submit","reset","scroll","resize","drag.*","drop"],p=function e(t,r){t.forEach(function(t){r(t),e(t.children,r)})},h=function e(r,n){var i=void 0,o=void 0,u=r.type,a=r.operator;if("Literal"===u)i=r.value;else if("Array"===u)i=r.elements.map(function(t){return e(t,n).value});else if("Object"===u)i={},r.properties.forEach(function(t){i[t.key]=e(t.value,n).value});else if("Identifier"===u){for(var s=n;s&&"undefined"==typeof s[r.name];)s=s.$parent;s||(s=n),i=s[r.name],o=function(e){return s[r.name]=e,e}}else if("Member"===u){var c=e(r.object,n).value,l=e(r.property,n).value;i="undefined"!=typeof c?c[l]:void 0,o=function(e){return c[l]=e,e}}else if("Conditional"===u)i=e(r.test,n).value?e(r.consequent,n).value:e(r.alternate,n).value;else if("Unary"===u||"Update"===u){var f=e(r.argument,n),d=f.value;i="!"===a?!d:"+"===a?+d:"-"===a?-d:"++"===a?d+1:"--"===a?d-1:null,"Update"===u&&(o=f.set,o&&(i=o(i)),r.prefix||(i+="++"===a?-1:1))}else if("Binary"===u||"Logical"===u||"Assignment"===u){var p=e(r.left,n),h=p.value,v=e(r.right,n).value;i="==="===a?h===v:"!=="===a?h!==v:"=="===a?h==v:"!="===a?h!=v:"<"===a?h<v:">"===a?h>v:"<="===a?h<=v:">="===a?h>=v:"&&"===a?h&&v:"||"===a?h||v:"+"===a?"string"==typeof(h+v)?t(h)+t(v):h+v:"-"===a?h-v:"*"===a?h*v:"/"===a?h/v:"%"===a?h%v:"*="===a?h*v:"/="===a?h/v:"%="===a?h%v:"+="===a?h+v:"-="===a?h-v:"="===a?v:null,"Assignment"===u&&(o=p.set,i=o(i))}else if("Call"===u||"NewExpression"===u){var m=r.callee.object?e(r.callee.object,n).value:n,b=e(r.callee,n).value,x=r.arguments.map(function(t){return e(t,n).value});i=b?"Call"===u?b.apply(m,x):new(b.bind.apply(b,x)):void 0}return{value:i,set:o}},v=[],m=function(e,t,r,n,i){var o={view:t,node:r,syntax:i,eval:function(){return h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,o.view).value},exec:function(t){if(e[t]){var r;(r=e[t]).call.apply(r,[o,o.view,o.node].concat(a(n)))}}};if(e.template){var u=document.createElement("span");u.innerHTML=e.template,u=u.childNodes[0],Array.from(r.attributes).forEach(function(e){return u.setAttribute(e.name,e.value)}),r.parentNode.replaceChild(u,r),o.node=u}return o},b=function e(t,n,i,o){if([1,3].indexOf(n.nodeType)!==-1){var u=n.vElement;if(u)return void(o&&u.view!==t.$parent?u.view.$setParent(t):(i.push(u),p(u.children,function(e){return e.binds.forEach(function(e){return e.view=t})}),u.parent&&r(u.parent.children,u)));if(u=n.vElement={view:t,parent:o,node:n,children:[],binds:[],removedAttrs:[]},i.push(u),1===n.nodeType){var a=Array.from(n.attributes),c=void 0;u.binds=[],v.forEach(function(r){if(r.tag){var i=n.tagName.match(new RegExp("^"+r.tag.replace("{prefix}",y.prefix)+"$","i"));if(i){var o=m(r,t,n,i);u.binds.push(o),c=r.block||r.template,r.template&&e(t,o.node,u.children)}}else r.attribute&&(a=a.filter(function(i){if(!c){var o=i.name.match(new RegExp("^"+r.attribute.replace("{prefix}",y.prefix)+"$","i"));if(o){var a=s(i.value||"undefined");u.removedAttrs.push({name:i.name,value:i.value}),n.removeAttribute(i.name);var l=m(r,t,n,o,a);u.binds.push(l),c=r.block||r.template,r.template&&e(t,l.node,u.children)}return!o}}))}),c||Array.from(n.childNodes).forEach(function(r){e(t,r,u.children,u)})}else if(3===n.nodeType&&n.nodeValue.indexOf("{{")>-1){var l=n.nodeValue;s(l,"Text").forEach(function(e){var r=void 0;if("string"==typeof e)r=document.createTextNode(e);else{r=e.html?document.createElement("span"):document.createTextNode("");var o=m(g,t,r,["",e.html?"html":"text"],e.expression),a=Object.assign({},u,{binds:[o]});i.push(a),r.vElement=a}n.parentNode.insertBefore(r,n)}),n.parentNode.removeChild(n)}}},x=0,y=function e(t,n,u){t="string"==typeof t?document.querySelector(t):t[0]||t;var a=[],c={},l=[],f=void 0,d=function(){f||(i(function(){m.$(),f=void 0}),f=!0)},v=void 0,m={$id:x++,$vDOM:a,$:function(){v||(p(a,function(e){return e.binds.forEach(function(e){return e.exec("update")})}),m.$emit("update"))},$destroy:function(){p(a,function(e){e.binds.forEach(function(e){return e.exec("destroy")}),delete e.node.vElement,e.removedAttrs.forEach(function(t){return e.node.setAttribute(t.name,t.value)})}),v=!0,m.$emit("destroy")},$on:function(e,t){c[e]||(c[e]=[]),
c[e].push(t)},$off:function(e,t){c[e]&&r(c[e],t)},$emit:function(e){c[e]&&c[e].forEach(function(e){return e()})},$watch:function(e,t){l.push({expr:e,syntax:s(e),cb:t})},$unwatch:function(e,t){var n=l.find(function(r){return r.expr===e&&r.cb===t});n&&r(l,n)},$setParent:function(e){var t=m.$parent;m.$parent=e,t&&t.$off&&t.$off("update",d),e.$on&&e.$on("update",d)}};m.$on("update",function(){l.forEach(function(e){var t=h(e.syntax,m).value;t!==e.val&&(e.val=t,e.cb(t))})}),m.$setParent(u||t.vElement&&t.vElement.view||e.root),b(m,t,a),p(a,function(e){return e.binds.forEach(function(e){return e.exec("create")})});var y=function e(t,r){if("object"!==("undefined"==typeof t?"undefined":o(t)))return t;var n=new Proxy(t,{get:function(e,t,r){var n=Reflect.get(e,t,r);return e instanceof Array||"function"!=typeof n?n:n.bind(e)},set:function(t,r,n,i){return t===m&&0===r.indexOf("$"),"object"!==("undefined"==typeof n?"undefined":o(n))||n instanceof Date||(n=e(n,!0)),d(),Reflect.set(t,r,n,i)}});return r&&(t instanceof Array?t.forEach(function(t,r){return n[r]=e(t,!0)}):Object.keys(t).forEach(function(r){return n[r]=e(t[r],!0)})),n};return d(),Object.assign(m,n),y(m)};Object.assign(y,{version:"0.2.1",parse:s,evaluate:h,prefix:"z-",directive:function(e){return e.template&&(e.block=!0,e.order=.5),e.order||(e.order=100),v.push(e),v.sort(function(e,t){return e.order-t.order}),e},root:{$parent:"undefined"!=typeof global?global:window,number:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(e).toFixed(t)},percent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(100*e).toFixed(t)+"%"}}});var g=y.directive({attribute:"{prefix}(text|html)",block:!0,create:function(e,t){t.innerHTML=""},update:function(e,r,n,i){var o=t(this.eval());o!==this.prevValue&&("html"===i?r.innerHTML=o:r.textContent=o,this.prevValue=o)}});return y.directive({attribute:"{prefix}show",update:function(e,t){var r=this.eval()?"":"none";r!==this.prevValue&&(t.style.display=r,this.prevValue=r)}}),y.directive({attribute:"{prefix}exist",order:3,block:!0,create:function(e,t,r){this.marker=document.createComment(r),t.parentNode.replaceChild(this.marker,t)},update:function(e,t){var r=!!this.eval();r!==this.prevValue&&(r?(this.clone=t.cloneNode(!0),this.childView=y(this.clone,void 0,e),this.marker.parentNode.insertBefore(this.clone,this.marker)):this.clone&&(this.marker.parentNode.removeChild(this.clone),this.childView.$destroy(),delete this.childView),this.prevValue=r)}}),y.directive({attribute:"{prefix}(.+)-in",order:2,block:!0,create:function(e,t,r){this.items=[],this.marker=document.createComment(r),this.key=function(e){return JSON.stringify(e)},t.parentNode.replaceChild(this.marker,t)},update:function(e,t,n,i){var o=this,a=this.eval()||[],s=document.createDocumentFragment();this.items.forEach(function(e){a.find(function(t){return o.key(t)===o.key(e.data)})||(e.view.$destroy(),o.marker.parentNode.removeChild(e.el),r(o.items,e))}),a.forEach(function(e){var r=o.items.find(function(t){return o.key(t.data)===o.key(e)});r||(r={el:t.cloneNode(!0),data:e},o.items.push(r),s.appendChild(r.el))}),this.marker.parentNode.insertBefore(s,this.marker),this.items.forEach(function(t){t.view||(t.view=y(t.el,u({},i,t.data),e))})}}),y.directive({attribute:"{prefix}(?:attr-(.+)|("+c.join("|")+"))",update:function(e,t,r,n,i){n=n||i;var o=this.eval();o!==this.prevValue&&(this.prevValue=o,l.indexOf(n)>-1&&(o=o?n:void 0),"undefined"==typeof o?t.removeAttribute(n):t.setAttribute(n,o))}}),y.directive({attribute:"{prefix}class-(.+)",update:function(e,t,r,n){var i=!!this.eval();i!==this.prevValue&&(this.prevValue=i,t.classList.toggle(n,i))}}),y.directive({attribute:"{prefix}(?:style-(.+)|("+f.join("|")+"))",update:function(e,t,r,n,i){var o=this.eval();o!==this.prevValue&&(this.prevValue=o,t.style[n||i]=o)}}),y.directive({attribute:"{prefix}model",block:!0,create:function(e,t){var r=this,i=t.tagName.toLowerCase(),o=(t.getAttribute("type")||"").toLowerCase();this.type="checkbox"===o?"checkbox":"select"===i?"select":"radio"===o?"radio":["range","number"].indexOf(o)>-1?"number":["date","datetime-local","time","month","week"].indexOf(o)>-1?"date":"text","radio"!==this.type||t.getAttribute("name")||t.setAttribute("name",n(e.$id+JSON.stringify(this.syntax))),this.getValue=function(e){var t=e.getAttribute("z-value");return t?r.eval(s(t)):e.getAttribute("value")},this.handler=function(){if("radio"!==r.type||t.checked){var n="checkbox"===r.type?!!t.checked:"select"===r.type?r.getValue(t.options[t.selectedIndex]):"radio"===r.type?r.getValue(t):"number"===r.type?Number(t.value):"date"===r.type?t.valueAsDate:t.value;n!==r.prevValue&&(r.prevValue=n,r.eval({type:"Assignment",operator:"=",left:r.syntax,right:{type:"Literal",value:n}}),e.$())}},t.addEventListener("input",this.handler),t.addEventListener("change",this.handler),"select"===this.type&&(t.selectedIndex=-1)},update:function(e,r){var n=this,i=this.eval();if(i!==this.prevValue){if("checkbox"===this.type)r.checked=!!i;else if("select"===this.type)r.selectedIndex=Array.from(r.options).reduce(function(e,r,o){var u=n.getValue(r);return r.setAttribute("value",t(u)),u===i?o:e},-1);else if("radio"===this.type){var o=this.getValue(r);r.checked=i===o,r.setAttribute("value",t(o))}else"number"===this.type?r.value=Number(i):"date"===this.type?r.valueAsDate=i:r.value=t(i);this.prevValue=i}},destroy:function(e,t){t.removeEventListener("input",this.handler),t.removeEventListener("change",this.handler)}}),y.directive({attribute:"{prefix}(?:on-(.+)|("+d.join("|")+"))",create:function(e,t,r,n,i){var o=this;this.handler=function(t){e.$event=t,o.eval(),delete e.$event},t.addEventListener(n||i,this.handler)},destroy:function(e,t,r,n,i){t.removeEventListener(n||i,this.handler)}}),y.directive({attribute:"{prefix}skip",order:1,block:!0}),y});
